<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
  <title>design.html</title>
</head>
<body>
<big><big><big>Jump from SOAP to REST with WSDL2REST</big></big></big><br>
<br>
<br>
<br>
<br>
<big><big>1. REST overview</big></big><br>
<br>
Representational State Transfer (REST) is an architectural style for
distributed hypermedia systems. Refer Roy<br>
Fielding's [1] for detail on the architectural style. REST
architectural style has been used to guide the design and<br>
development of the architecture for the modern Web. It defines how
resources are defined and addressed.<br>
<br>
The core abstraction in REST is a remote resource instead of a remote
procedure call.&nbsp; Rather than inventing an<br>
exhaustive list of standards, REST uses existing Internet standards,
including HTTP, XML, and TCP/IP. Instead of every possible<br>
scenario, REST covers the most common problems. <br>
<br>
Uses TCP/IP naming standards to name resources on the Web. Queries and
manipulates those resources with HTTP.<br>
Uses standard text-based message formats like XML or HTML to structure
data<br>
<br>
And well-formed HTML is a subset of XML, satisfying the last REST
requirement<br>
<br>
The most important HTTP methods are POST, GET, PUT and DELETE which
CRUD operations should be map to.<br>
<br>
POST&nbsp;&nbsp; - Create, Update, Delete<br>
GET&nbsp;&nbsp;&nbsp; - Read<br>
PUT&nbsp;&nbsp;&nbsp; - Create, Update<br>
DELETE - Delete<br>
<br>
Characteristics of the REST<br>
- Request/Response style<br>
- stateless<br>
- cache<br>
- defined resources<br>
- interconnected<br>
- multi-layered<br>
<br>
<br>
Consider a service that allows you to get a stock quote with name
StockQuoteService, with operation getStockQuote(String<br>
ticker). The web service makes available a URL to each ticker symbols
resource. Example, here's how a client requests<br>
stock quote for ticker XYZ<br>
<br>
http://www.stock-example.com/stockquoteservice/StockQuote/XYZ<br>
<br>
client would make a HTTP GET request on this URL which would return
following information:<br>
<br>
-Last Price<br>
-Highest trade today<br>
-Lowest trade today<br>
-etc.<br>
<br>
in a say XML document like:<br>
<br>
<code>&lt;?xml version="1.0"?&gt;<br>
&lt;q:StockQuote xmlns:q="http://www.stock-example.com"<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
xmlns:xlink="http://www.w3.org/1999/xlink"&gt;<br>
&nbsp;&nbsp; &nbsp;&lt;ticker&gt;XYZ&lt;/ticker&gt;<br>
&nbsp;&nbsp; &nbsp;&lt;last-price
currency="USD"&gt;10.32&lt;/last-price&gt;<br>
&nbsp;&nbsp; &nbsp;&lt;highest-trade-today&gt; ...
&lt;/highest-trade-today&gt;<br>
&nbsp;&nbsp; &nbsp;&lt;lowest-trade-today&gt; ...
&lt;/lowest-trade-today&gt;<br>
&nbsp;&nbsp; &nbsp;&lt;bid
xlink:href="http://www.stock-example.com/stockbidderservice/bid/XYZ"/&gt;<br>
&lt;/q:StockQuote&gt;&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;</code><br>
As you could see the retuned XML document has the required infomation
plus a additional continuation infomation if the<br>
client<br>
expected make a bid for the got infomation. This XML could be mapped to
a object in an object oriented language such<br>
as java, c# &amp; C++ ... etc. Sor an example in java this could be
mapped through JAXB (java api for xml binding)<br>
i.e. returned class could be some what:<br>
<br>
<code>class StockQuote{<br>
&nbsp;&nbsp; &nbsp;String ticker;<br>
&nbsp;&nbsp; &nbsp;String currency;<br>
&nbsp;&nbsp; &nbsp;BigDecimal lastPrice;<br>
&nbsp;&nbsp; &nbsp;BigDecimal highestPriceToday;<br>
&nbsp;&nbsp; &nbsp;BigDecimal lowestPriceToday;<br>
&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp; &nbsp;URL bid;<br>
&nbsp;&nbsp; &nbsp;<br>
&nbsp;&nbsp; &nbsp;....<br>
}</code><br>
<br>
Main point in REST architecture is that we need giving a resource id
for all our entities that need manipulating.<br>
as in above example the resource id is the ticker which combined with
the service endpoint forms a URI. Other points are<br>
all<br>
calls should be stateless[1]. The resources should be nouns, not verbs.<br>
<br>
It is important that GET method should not modify any resources
i.e.&nbsp; free of side effects; this maps to readonly<br>
operations, if write operations are required the HTTP POST, PUT or
DELETE should be used.<br>
<br>
Now consider a that we need some past stock quotes data for a given
period to do some analytics. For example consider a<br>
method StockQuote[] getStockQuoteHistory(String ticker, String
fromDate, String toDate); this could be mapped to a URI<br>
like:<br>
(for simplicity for explanation, here the date is given as a string;
but we could have used Date object instead)<br>
http://www.stock-example.com/stockquoteservice/StockQuoteHistory/XYZ/&lt;fromdate&gt;/&lt;todate&gt;<br>
<br>
e.g. if we want the stock quote from 01/01/2008 to 01/31/2008 then the
URI would map to something like this:<br>
<br>
http://www.stock-example.com/stockquoteservice/StockQuoteHistory/XYZ/01012008/01312008<br>
<br>
This is an implisit URI and is not a physical one. It's our service
implementation which interprits meaning of this URI.<br>
<br>
<br>
<br>
<br>
<big><big><br>
2. Mapping SOAP services to RESTful services </big></big>&nbsp;<br>
<br>
The approach here explained a as one solution for the migration. It is
request for comments, suggestion etc.<br>
<br>
How do we map SOAP method calls &amp; parameters to resources?<br>
<br>
REST is basically represents resources and operations on those
resources. Where as,<br>
SOAP more or less hides real resource behind exposed service interface.
E.g.<br>
A SOAP service method like getArticle(1) could be maps to GET
/article/1 of RESTful service. What if an operation like:<br>
<br>
setContactDetails(InvokationContext ctx, String firstName, String
lastName, String description, String addressLine1,<br>
String addressLine2, String city, String state, String zipcode, String
country)<br>
<br>
need mapping to REST style.<br>
<br>
Here above the InvokationContext is used to send client credentials,
context related information etc.<br>
Consider an example of calling above method with following data<br>
<br>
<code>setContactAddress(ctx, &#8220;John&nbsp; &#8220;ABC Computing Systems
Inc,&nbsp; Suite 5A-1204&#8221;,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&#8220;Orchard Park&#8220;, &#8220;TUCSON&#8221;, &#8220;AZ&#8221;, 85705, USA)</code><br>
<br>
When this is mapped to REST style resources we might define URL
something like:<br>
<code><br>
http://hostname:port/directory-service/ContactAddress/&lt;name(firstname,lastname)&gt;</code><br>
<br>
to store the data we need to POST the data on the above URI. However,
there is couple of problems:<br>
<br>
-Based on the above contact address details this URI could grow large;
As you know some web servers have limitation on<br>
the URL size.<br>
- what about InvokationContext, may be we could omit it for the time
being but, it may also be needed to map, but we<br>
cannot determine the size or the content in it.<br>
<br>
One way to reduce the length as this example is to map resources as
abstract:<br>
Say since we know it is contact address we only provide person name
instead of all address fields ids.<br>
<br>
Let&#8217;s say now we need obtaining above person&#8217;s country of work from the
directory service above using HTTP GET. Mmm&#8230; how<br>
should we issue the resource request??<br>
Either we should retrieve the full contact address or we should request
it through a parameter on the URL query string<br>
which latter is wrong in REST style webservices.<br>
Ideally there should be another URL like this:<br>
<br>
<code>http://hostname:port/directory-service/ContactAddress/&lt;name(firstname,lastname)&gt;/country</code>
and issuing a GET on this URL<br>
result in the person&#8217;s country of work.<br>
<br>
ok now lets say this person has moved and now we need to update his
current location address. This need issuing UPDATE<br>
(or POST) HTTP requests for the person on the following URL.<br>
<br>
<code>http://hostname:port/directory-service/ContactAddress/&lt;name(firstname,lastname)&gt;</code><br>
<br>
Assume that at beginning of this system, directory-service need
provisioning/register users on the system. So the HTTP<br>
PUT operation is issued on the URL<br>
<br>
<code>http://hostname:port/directory-service/&lt;name(firstname,lastname)&gt;<br>
<br>
</code>to provision a particular user on the system by passing user
information something like date of birth.<br>
<br>
Assume as in above example a SOAP based service has been implemented
(see reference sample). If we take the respective<br>
WSDL it has following main components. <br>
<br>
<code>&lt;definitions&gt;<br>
&lt;types&gt;<br>
&nbsp;&nbsp; definition of types........<br>
&lt;/types&gt;<br>
<br>
&lt;message&gt;<br>
&nbsp;&nbsp; definition of a message....<br>
&lt;/message&gt;<br>
<br>
&lt;portType&gt;<br>
&nbsp;&nbsp; definition of a port.......<br>
&lt;/portType&gt;<br>
<br>
&lt;binding&gt;<br>
&nbsp;&nbsp; definition of a binding....<br>
&lt;/binding&gt;<br>
<br>
&lt;/definitions&gt;</code><br>
<br>
- WSDL Ports<br>
The &lt;portType&gt; element is the most important WSDL element.<br>
It describes a web service, the operations that can be performed, and
the messages that are involved.<br>
The &lt;portType&gt; element can be compared to a function library (or
a module, or a class) in a traditional programming<br>
language.<br>
<br>
- WSDL Messages<br>
The &lt;message&gt; element defines the data elements of an operation.<br>
Each message can consist of one or more parts. The parts can be
compared to the parameters of a function call in a<br>
traditional programming language.<br>
<br>
- WSDL Types<br>
The &lt;types&gt; element defines the data type that are used by the
web service.<br>
For maximum platform neutrality, WSDL uses XML Schema syntax to define
data types.<br>
<br>
- WSDL Bindings<br>
The &lt;binding&gt; element defines the message format and protocol
details for each port.<br>
<br>
<br>
<br>
<big>HTTP Defintion</big><br>
<br>
<big>GET</big><br>
The GET method means retrieve whatever information (in the form of an
entity) is identified by the Request-URI. If the Request-URI refers to <br>
a data-producing process, it is the produced data which shall be
returned as the entity in the response and not the source text of the
process, <br>
unless that text happens to be the output of the process. <br>
<br>
The semantics of the GET method change to a "conditional GET" if the
request message includes an If-Modified-Since, If-Unmodified-Since, <br>
If-Match, If-None-Match, or If-Range header field. A conditional GET
method requests that the entity be transferred only under the
circumstances <br>
described by the conditional header field(s). The conditional GET
method is intended to reduce unnecessary network usage by allowing
cached <br>
entities to be refreshed without requiring multiple requests or
transferring data already held by the client. <br>
<br>
The semantics of the GET method change to a "partial GET" if the
request message includes a Range header field. A partial GET requests
that only <br>
part of the entity be transferred, as described in Section 14.35
(Range). The partial GET method is intended to reduce unnecessary
network usage <br>
by allowing partially-retrieved entities to be completed without
transferring data already held by the client. <br>
<br>
The response to a GET request is cacheable if and only if it meets the
requirements for HTTP caching described in Section 13 (Caching in
HTTP). <br>
<br>
See Section 15.1.3 (Encoding Sensitive Information in URI's) for
security considerations when used for forms. <br>
<br>
<br>
<br>
<br>
<big><big><big>3. High Level Approach</big></big></big><br>
<br>
High level approach to the solution is outline below:<br>
<br>
WSDL -&gt; obtain service API &amp; params etc-&gt; map resources
(URLs) &amp; http operations -&gt; user refines mapping -&gt; generate<br>
jsr-311 configuration &amp; classes.<br>
<br>
Wsdl2java tool generates java binding for the webservices. It creates
java code for services implementation and<br>
respective Java code for client side artifacts. The wsdl2java current
impl. has mechanism to read WSDL document and<br>
generate it&#8217;s object model and emit respective java code for that.
Since this tool has the way of reading, understanding<br>
&amp; creating a respective wsdl representation, we could use it to
read the WSDL and create us the representation (in<br>
memory). There is an emitter code which you could plug in to generate
output of what you need, from that in memory<br>
representation. This resembles a compiler &amp; a code generator.
Compiler part include parser which could parse WSDL<br>
document (including syntax checking etc), and creating the parsed tree
in memory which could be used for code<br>
generation. In this case the code generator generates java code. What
we could do is replace this code generator to<br>
generate required RESTful services stubs &amp; skeletons implementation
java code. This seems feasible. i.e. replace the<br>
java emitter with the emitter to generate RESTful services stubs.<br>
<br>
idea is to target this output for an existing REST supporting tool kit
like: CXF, Axis etc. for starter.<br>
i.e. we generate services stubs targeting these tool kits until we
create one of our own.<br>
The generated code should follow the JSR-311 specification.<br>
<br>
Springframework allows us to define &amp; use webservices very simply
than creating respective tool kit based stubs. So we<br>
should plan on creating a springframework plug in to make use of our
generated classes from the wsdl2REST tool kit. Its<br>
proxy based service definition &amp; invocation model make things
easier by not wanting to understand a particular tool kit<br>
implementation.<br>
<br>
<br>
&lt;&lt;TODO&gt;&gt;<br>
<br>
<big><big>References:</big></big><br>
<br>
[1] Fielding, Roy Thomas. Architectural Styles and the Design of
Network-based Software Architectures. Doctoral<br>
dissertation, University of California, Irvine, 2000:
http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm<br>
[2] Building Web Services the REST Way:
http://www.xfront.com/REST-Web-Services.html<br>
[3] Intoruction to mapping:
http://www.infoq.com/articles/rest-introduction<br>
[4]<br>
<br>
</body>
</html>
